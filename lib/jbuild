(jbuild_version 1)

(library
 ((name subsocia)
  (public_name subsocia)
  (wrapped false)
  (modules_without_implementation
   (Subsocia_intf
    Subsocia_derived_intf
    Subsocia_schema_types
    Subsocia_selector_types))
  (preprocess (pps (lwt_ppx)))
  (libraries
   (extunix
    lwt
    lwt.log
    panograph
    yojson))))

(ocamlyacc (subsocia_parser))
(ocamllex (subsocia_lexer))

(rule
 ((targets (subsocia_version.ml))
  (deps (subsocia_version.ml.in subsocia_version.dev.sed))
  (fallback)
  (action (with-stdout-to ${@} (run sed -f subsocia_version.dev.sed ${<})))))
