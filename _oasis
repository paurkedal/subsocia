OASISFormat: 0.4
Name: subsocia
Version: 0.3
Synopsis: People, organization, and authorization
Authors: Petter A. Urkedal
License: LGPL-3 with OCaml linking exception
AlphaFeatures: ocamlbuild_more_args, pure_interface
BetaFeatures: section_object
Plugins: DevFiles (0.4), META (0.4)
BuildTools: ocamlbuild
XOCamlbuildPluginTags: package(eliom.ocamlbuild)
OCamlVersion: >= 4.01

FilesAB: lib/subsocia_version.ml.ab

Library "subsocia"
  Path: lib
  Modules:
    Subsocia_common,
    Subsocia_derived,
    Subsocia_derived_intf,
    Subsocia_intf,
    Subsocia_rpc_client,
    Subsocia_rpc_server,
    Subsocia_schema,
    Subsocia_schema_types,
    Subsocia_selector,
    Subsocia_selector_types,
    Subsocia_version
  InternalModules:
    Subsocia_rpc_primitives,
    Subsocia_lexer,
    Subsocia_parser,
    Subsocia_prereq
  BuildDepends:
    extunix,
    lwt,
    panograph,
    prime.testing,
    rpclib
  ByteOpt: -thread
  NativeOpt: -thread

Executable "subsocia"
  Path: bin
  MainIs: subsocia_main.ml
  BuildDepends:
    cmdliner,
    subsocia,
    subsocia.data
  ByteOpt: -thread
  NativeOpt: -thread
  CompiledObject: native

Library "subsocia-data"
  Path: lib/data
  FindlibParent: subsocia
  FindlibName: data
  BuildDepends:
    caqti.lwt,
    config-file,
    subsocia
  Modules:
    Subsocia_config,
    Subsocia_connection,
    Subsocia_direct,
    Subsocia_direct_intf,
    Subsocia_plugin
  ByteOpt: -thread
  NativeOpt: -thread
  DataFiles:
    ../../schema/subsocia_core.sql ($datadir/subsocia/schema),
    ../../schema/subsocia_core.sscm ($datadir/subsocia/schema),
    ../../schema/subsocia_data.sql ($datadir/subsocia/schema)

Document api
  Title: Subsocia API Reference
  Type: ocamlbuild (0.4)
  InstallDir: $htmldir/html
  BuildTools+: ocamldoc
  XOCamlbuildPath: lib
  XOCamlbuildLibraries: subsocia
  DataFiles: COPYING ($docdir), COPYING.LESSER ($docdir)

Library "subsocia-web-server"
  Path: web
  FindlibParent: subsocia
  FindlibName: web-server
  Modules:
    server/Sociaweb_auth,
    server/Sociaweb_content,
    server/Sociaweb_request
  BuildDepends: eliom.server, prime, subsocia, subsocia.data
  ByteOpt: -thread
  NativeOpt: -thread
  CompiledObject: native

Library "subsocia-web-module"
  Path: web
  FindlibParent: subsocia
  FindlibName: web-module
  Modules:
    server/Sociaweb_main,
    server/Sociaweb_registration,
    server/Sociaweb_restapi,
    server/Sociaweb_services
  BuildDepends: subsocia.web-server
  ByteOpt: -thread
  NativeOpt: -thread
  DataFiles:
    static/css/*.css ($datadir/subsocia/static/css),
    ../_build/web/client/*.js ($datadir/subsocia/static)
  CompiledObject: native

Object "subsocia-web-debug-module"
  Path: web/server
  FindlibFullName: subsocia.web-debug-module
  Modules: Sociaweb_debug

Executable "sociaweb_main"
  Path: web/client
  BuildDepends: eliom.client, prime, subsocia
  MainIs: sociaweb_main.ml
  ByteOpt: -thread
  Install: false

Executable "testsuite"
  Path: tests
  MainIs: testsuite.ml
  BuildDepends: oUnit, lwt.syntax, subsocia.data
  ByteOpt: -thread
  NativeOpt: -thread
  Build$: flag(tests)
  Install: false
  CompiledObject: native
